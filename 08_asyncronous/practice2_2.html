<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>실습2_2 콜백 지옥</title>
  <style>
    body {
      background-color: pink;
    }
  </style>
</head>

<body>
  <!-- 실습2 배경색 변경 Callback을 Promise, async로 변경하기
        2.1 async ~ await로-->
  <h1>배경색이 1초에 한번씩 변경됩니다.</h1>
  <!-- red, orange, yellow, yellowgreen, green, skyblue ,blue, navy, purple -->
</body>
<script>
  function bgChange(color) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        document.body.style.backgroundColor = color;
        resolve();
      }, 1000);
    });
  }

  async function execute() {
    await bgChange("red");
    await bgChange("orange");
    await bgChange("yellow");
    await bgChange("yellowgreen")
    await bgChange("green");
    await bgChange("skyblue");
    await bgChange("blue");
    await bgChange("navy");
    await bgChange("purple");
  }
  execute();

  /* ver2 배열과 for문 사용
  let colors = ["red", "orange", "yellow", "yellowgreen", "green", "skyblue", "blue"];
  function changeColor(color_idx) {
      return new Promise((resolve, reject) => {
        setTimeout(function () {
          document.body.style.backgroundColor = colors[color_idx];
          resolve(color_idx + 1);
        }, 1000);
      });
    }

    async function execute() {
      for (let i = 0; i < colors.length; i++) {
        var idx = await changeColor(i);
      }
    }
    execute();
  */
</script>

</html>